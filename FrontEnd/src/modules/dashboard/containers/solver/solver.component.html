<layout-dashboard id="Layout" class="d-print-none">
  <sb-dashboard-head title="Solver" [hideBreadcrumbs]="true"></sb-dashboard-head>
  <div class="container p-0" id="main-container">
    <div class="row d-flex justify-content-center p-0" id="main-row">
      <div class="col-md-3 text-center" id="PictureColumn">
        <div class="parent text-center" id="CockpitParent">
          <img src="assets/img/Cockpit.jpeg" id="CockpitPicture" />
          <div class="shadow-md rounded bg-dark attachment-box p-1 d-flex justify-content-center" id="PilotBox1"><h5 id="PilotBox1Text" class="text-center"></h5></div>
          <div class="shadow-md rounded bg-dark attachment-box p-1 d-flex justify-content-center" id="PilotBox2"><h5 id="PilotBox2Text" class="text-center"></h5></div>
          <img src="assets/img/black-line.jpg" id="BlackLine1" />
          <img src="assets/img/black-line.jpg" id="BlackLine2" />
        </div>
        <div class="parent text-center" id="FullPlaneParent">
          <img src="assets/img/Full_Plane.jpeg" id="FullPlanePicture"/>
          <div class="shadow-md rounded bg-dark attachment-box p-1 d-flex justify-content-center" id="AttachmentBox1">
            <h5 class="text-center" *ngIf="this.currentProfile">{{ currentProfile.outboard/2 }} lbs</h5>
          </div>
          <div class="shadow-md rounded bg-dark attachment-box p-1 d-flex justify-content-center" id="AttachmentBox2">
            <h5 class="text-center">NA</h5>
          </div>
          <div class="shadow-md rounded bg-dark attachment-box p-1 d-flex justify-content-center" id="AttachmentBox3"><h5 class="text-center" id="AgilePodText"></h5></div>
          <div class="shadow-md rounded bg-dark attachment-box p-1 d-flex justify-content-center" id="AttachmentBox4">
            <h5 class="text-center">NA</h5>
          </div>
          <div class="shadow-md rounded bg-dark attachment-box p-1 d-flex justify-content-center" id="AttachmentBox5">
            <h5 class="text-center" *ngIf="this.currentProfile">{{ currentProfile.outboard/2 }} lbs</h5>
          </div>
        </div>
      </div>
      <div class="col-md-4 text-center left-column p-0 ml-2">
        <div class="card left-card text-center">
          <div class="card-header text-center">
            Runway Conditions
          </div>
          <div class="card-body">
            <button class="btn btn-dark parameter-button" (click)="openManualModal()" id="ManualButton">Manual</button>
            <button class="btn btn-dark parameter-button" (click)="openAutomaticModal()" id="AutomaticButton">Automatic</button>
          </div>
        </div>
        <div class="card text-center left-card">
          <div class="card-header text-center">
            Pilots
          </div>
          <div class="row">
            <label id="BaggageLabel">Baggage Weight:</label>
          </div>
          <div class="card-body pl-0 pr-0">
            <div class="row d-flex justify-content-center">
              <div class="col-md-6">
                <select class="btn btn-dark pilot-input" id="Pilot1ProfileSelect">
                  <option>Pilot 1</option>
                </select>
                <select [disabled] = "pilot1NotSelected" class="btn btn-dark pilot-input" id="Pilot2ProfileSelect">
                  <option>Pilot 2</option>
                  <option>None</option>
                </select>
              </div>  
              <div class="col-md-6">
                <div class="row d-flex justify-content-center h-100">
                  <form [formGroup]="baggageForm" class="d-flex justify-content-center">
                    <div class="row d-flex justify-content-center" [formGroup]="baggageForm">
                      <input type="number" class="bag-input border border-dark text-right" formControlName="baggage1" id="Baggage1" [ngClass]="{ 'is-invalid': submittedCalc && fBag['baggage1'].errors }"/>
                      <label class="ml-1 mt-2">lbs</label>
                      <div *ngIf="submittedCalc && fBag['baggage1'].errors" class="invalid-feedback">
                        <div *ngIf="fBag['baggage1'].errors['min']">Baggage cannot be less than 0 lbs.</div>
                      </div>
                      <input type="number" class="bag-input border border-dark text-right" formControlName="baggage1" id="Baggage2" [ngClass]="{ 'is-invalid': submittedCalc && fBag['baggage2'].errors }"/>
                      <label class="ml-1 mt-2">lbs</label>
                      <div *ngIf="submittedCalc && fBag['baggage2'].errors" class="invalid-feedback">
                        <div *ngIf="fBag['baggage2'].errors['min']">Baggage cannot be less than 0 lbs.</div>
                      </div>
                    </div>
                  </form>
                </div>
              </div>
            </div>  
          </div>
        </div>
        <div class="card text-center left-card">
          <div class="card-header text-center">
            Mission Info
          </div>
          <div class="card-body p-2">
            <div class="row d-flex justify-content-center">
              <div class="col-md-5 my-auto mr-0 ml-0 pl-3">
                <label>Abort Distance:</label>
                <form [formGroup]="abortForm" class="w-100">
                  <div class="row d-flex justify-content-center" [formGroup]="abortForm">
                    <input type="number" formControlName="abortDistance" class="time-item text-right border border-dark" id="AbortDistanceInput" value="0" [ngClass]="{ 'is-invalid': submittedCalc && fAbort['abortDistance'].errors }">
                    <div *ngIf="submittedCalc && fAbort['abortDistance'].errors" class="invalid-feedback">
                      <div *ngIf="fAbort['abortDistance'].errors['required']">Abort Distance is required</div>
                      <div *ngIf="fAbort['abortDistance'].errors['min']">Abort Distance cannot be less than 0.</div>
                    </div>
                    <label class="time-label mt-2">&nbsp;ft</label>
                  </div>
                </form>
              </div>
              <div class="col-md-5 mr-0 ml-0 pl-3">
                <label class="mb-0">Parachute 2:</label>
                <div class="row d-flex justify-content-center">
                  <input type="radio" class="radio ml-2" id="ParachuteYesRadio" checked/>
                  <label  class="radio-label ml-1">In</label>
                  <input type="radio" class="radio ml-2" id="ParachuteNoRadio"/>
                  <label class="radio-label ml-1">Out</label>
                </div>
              </div>
            </div>  
          </div>
        </div>
        <div class="card text-center left-card">
          <div class="card-header text-center">
            Aircraft Profile
          </div>
          <div class="card-body">
            <select class="btn btn-dark" id="AircraftProfileSelect">
              <option>Choose Profile</option>
            </select>
          </div>
        </div>
        <button class="btn-lg btn-dark" [disabled] = "calculateLoading" id="CalculateButton" (click) = "solve()">
          <span *ngIf="calculateLoading" class="spinner-border spinner-border-sm mr-1"></span>
          Solve
        </button>
      </div>
      <div class="col-md-4">
        <div class="row d-flex justify-content-center">
          <div id="airportID-output">
            <div class="w-100 shadow-lg text-center bg-dark airport-output rounded p-2" id="IDContainer">
              <h2 class="output-label">Airport ID: {{runwayConditions.airportID.toUpperCase()}}</h2>
            </div>
          </div>
        </div>
        <div class="row d-flex justify-content-center">
          <div class="col-lg-4">
            <div class="row d-flex justify-content-center">
              <div class="shadow-lg airport-output text-center bg-dark rounded p-3">
                <h4 class="output-label p-0 m-0">Temperature</h4>
              </div>
            </div> 
            <div class="row d-flex justify-content-center">
              <div class="shadow-lg airport-output text-center bg-dark rounded p-3">
                <h5 class="output-label p-0 m-0">Pressure Altitude</h5>
              </div>
            </div> 
            <div class="row d-flex justify-content-center">
              <div class="shadow-lg airport-output text-center bg-dark rounded p-3">
                <h4 class="output-label p-0 m-0">Precipitation</h4>
              </div>
            </div> 
            <div class="row d-flex justify-content-center">
              <div class="shadow-lg airport-output text-center bg-dark rounded p-3">
                <h4 class="output-label p-0 m-0">Head Wind</h4>
              </div>
            </div> 
            <div class="row d-flex justify-content-center">
              <div class="shadow-lg airport-output text-center bg-dark rounded p-3">
                <h5 class="output-label p-0 m-0">Runway Length</h5>
              </div>
            </div> 
            <div class="row d-flex justify-content-center">
              <div class="shadow-lg airport-output text-center bg-dark rounded p-3">
                <h4 class="output-label p-0 m-0">Runway Type</h4>
              </div>
            </div> 
            <div class="row d-flex justify-content-center">
              <div class="shadow-lg airport-output text-center bg-dark rounded p-3">
                <h4 class="output-label p-0 m-0">Slope</h4>
              </div>
            </div> 
          </div>
          <div class="col-lg-4">
            <div class="row d-flex justify-content-center">
              <div class="shadow-lg airport-output text-center bg-white rounded p-3">
                <div class="row d-flex justify-content-center">
                  <h4 id="temp-output" class="m-0 p-0" *ngIf="runwayConditions.temp !== null">{{runwayConditions.temp.toFixed(1)}}</h4>
                  <h4 class="m-0 p-0">&nbsp;&deg;C</h4>
                </div>
              </div>
            </div> 
            <div class="row d-flex justify-content-center">
              <div class="shadow-lg airport-output text-center bg-white rounded p-3">
                <div class="row d-flex justify-content-center">
                <h4 id="pressure-altitude-output" class="m-0 p-0" *ngIf="runwayConditions.pressureAltitude !== null">{{(runwayConditions.pressureAltitude*3.28084).toFixed(1) }}</h4>
                <h4 class="m-0 p-0">&nbsp;ft</h4>
                </div>
              </div>
            </div> 
            <div class="row d-flex justify-content-center">
              <div class="shadow-lg airport-output text-center bg-white rounded p-3">
                <div class="row d-flex justify-content-center">
                  <h4 id="precipitation-output" class="m-0 p-0" *ngIf="runwayConditions.precipitation !== null">{{runwayConditions.precipitation.toFixed(2)}}</h4>
                  <h4 class="m-0 p-0">&nbsp;in</h4>
                </div>
              </div>
            </div> 
            <div class="row d-flex justify-content-center">
              <div class="shadow-lg airport-output text-center bg-white rounded p-3">
                <div class="row d-flex justify-content-center">
                  <h4 id="headwind-output" class="m-0 p-0" *ngIf="runwayConditions.headWind !== null">{{runwayConditions.headWind.toFixed(2)}}</h4>
                  <h4 class="m-0 p-0">&nbsp;kts</h4>
                </div>
              </div>
            </div> 
            <div class="row d-flex justify-content-center">
              <div class="shadow-lg airport-output text-center bg-white rounded p-3">
                <div class="row d-flex justify-content-center">
                  <h4 id="runway-length-output" class="m-0 p-0" *ngIf="runwayConditions.runwayLength !== null">{{(runwayConditions.runwayLength*3.28084).toFixed(0)}}</h4>
                  <h4 class="m-0 p-0">&nbsp;ft</h4>
                </div>
              </div>
            </div> 
            <div class="row d-flex justify-content-center">
              <div class="shadow-lg airport-output text-center bg-white rounded p-3 m-0">
                <div class="row d-flex justify-content-center">
                  <h4 id="runway-type-output" class="m-0 p-0">{{runwayConditions.runwayType}}&nbsp;</h4>
                </div>
              </div>
            </div> 
            <div class="row d-flex justify-content-center">
              <div class="shadow-lg airport-output text-center bg-white rounded p-3 h-100">
                <div class="row d-flex justify-content-center">
                  <h4 id="slope-output" class="p-0 m-0" *ngIf="runwayConditions.runwayLength !== null">{{runwayConditions.slope.toFixed(3)}}</h4>
                  <h4 class="m-0 p-0">&deg;</h4>
                </div>
              </div>
            </div> 
          </div>
        </div>
      </div>  
    </div>
  </div>



<!-- Start of Modals -->
  <div class="modal" tabindex="-1" role="dialog" [ngStyle]="{'display':displaySaveStyleAutomatic}">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header d-flex justify-content-center">
          <h1 class="modal-title text-center my-auto">Query Runway</h1>
        </div>
        <div class="modal-body">
          <div class="row d-flex justify-content-center">
            <form [formGroup]="runwaysForm" (ngSubmit)="findRunways()">
              <div class="row d-flex justify-content-center">
                <label for="airportInput">Enter Airport ID:</label>
              </div>
              <div class="row d-flex justify-content-center form-group" [formGroup]="runwaysForm">
                <input type="text" formControlName="airportInput" id="airportID" class="form-control border border-dark" [ngClass]="{ 'is-invalid': submittedRunways && f['airportInput'].errors }" />
                <div *ngIf="submittedRunways && f['airportInput'].errors" class="invalid-feedback">
                  <div *ngIf="f['airportInput'].errors['required']">Airport ID is required</div>
                  <div *ngIf="f['airportInput'].errors['maxlength']">Airport ID must be less than 5 characters.</div>
                  <div *ngIf="f['airportInput'].errors['minlength']">Airport ID must be at least 2 characters</div>
                </div>
              </div>
              <div class="row d-flex justify-content-center">
                <button type="submit" [disabled]="runwaysLoading" id="FindRunwaysButton" class="btn btn-outline-dark active text-center" >
                  <span *ngIf="runwaysLoading" class="spinner-border spinner-border-sm mr-1"></span>
                  Find Runways
                </button>
              </div>
            </form>
          </div>
          <div class="row d-flex justify-content-center">
            <label>Select Takeoff Runway:</label>
          </div>
          <div class="row d-flex justify-content-center">
            <div class="card border-1 mb-4" id="runway-button-group"></div> 
          </div>
          <div class="row d-flex justify-content-center">
              <label for=RunwaySideButton1>Select Runway Starting Side: </label>
          </div>
          <div class="row d-flex justify-content-center">
            <div class="blank-card mt-2">
              <button type="button" id="RunwaySideButton1" class="btn btn-outline-dark text-center side-button">Side 1</button>
              <button type="button" id="RunwaySideButton2" class="btn btn-outline-dark text-center side-button">Side 2</button>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-outline-dark active" (click)="closeAutomaticModal(false)">Close</button>
          <button type="button" class="btn btn-outline-dark active" (click)="closeAutomaticModal(true)">Save</button>
        </div>
      </div>
    </div>
  </div>

  <div class="modal" tabindex="-1" role="dialog" [ngStyle]="{'display':displaySaveStyleManual}">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header d-flex justify-content-center">
          <h1 class="modal-title text-center my-auto">Input Runway Conditions</h1>
        </div>
        <div class="modal-body">
          <div class="row d-flex justify-content-center">
            <form [formGroup]="formManualModal" (ngSubmit)="saveManualModal()">
              <div class="form-group" class="mb-0 mt-0" [formGroup]="formManualModal">
                  <label for="temperature">Temperature</label>
                  <div class="row">
                    <input type="number" formControlName="temperature" class="form-control manual-form-control" placeholder="Enter temperature" [ngClass]="{ 'is-invalid': submittedManualModal && fManual['temperature'].errors }" />
                    <h2 class="ml-1 mt-1 font-weight-normal">&deg;C</h2>
                  </div>
                  <div *ngIf="submittedManualModal && fManual['temperature'].errors" class="invalid-feedback">
                      <div *ngIf="fManual['temperature'].errors['required']">Temperature is required</div>
                  </div>
              </div> 
              <div class="form-group" [formGroup]="formManualModal">
                <label >Runway Slope</label>
                <div class="row">
                  <input type="number" formControlName="slope" class="form-control manual-form-control" placeholder="Enter slope" [ngClass]="{ 'is-invalid': submittedManualModal && fManual['slope'].errors }" />
                  <h2 class="ml-1 mt-1 font-weight-normal">&deg;</h2>
                </div>
                <div *ngIf="submittedManualModal && fManual['slope'].errors" class="invalid-feedback">
                  <div *ngIf="fManual['slope'].errors['required']">Slope is required.</div>
                </div>
              </div> 
              <div class="form-group" class="mt-0" [formGroup]="formManualModal">
                <label class="mt-0">Runway Length</label>
                <div class="row">
                  <input type="number" formControlName="runwayLength" class="form-control manual-form-control" placeholder="Enter runway length" [ngClass]="{ 'is-invalid': submittedManualModal && fManual['runwayLength'].errors }" />
                  <h2 class="ml-1 mt-1 font-weight-normal">ft</h2>
                </div>
                <div *ngIf="submittedManualModal && fManual['runwayLength'].errors" class="invalid-feedback">
                  <div *ngIf="fManual['runwayLength'].errors['required']">Runway length is required.</div>
                  <div *ngIf="fManual['runwayLength'].errors['min']">Runway length can't be less than 0.</div>
                </div>
              </div> 
              <div class="form-group" [formGroup]="formManualModal">
                <label for="precipitation">Is the runway wet?</label>
                 <div class="row d-flex justify-content-left">
                  <input type="radio" formControlName="precipitationYes" id="PrecipitationYes" class="radio" value="1"/>
                  <label for="precipitationYes" class="radio-label">Yes</label>
                  <input type="radio" formControlName="precipitationNo" id="PrecipitationNo" class="radio"/>
                  <label for="precipitationNo" class="radio-label">No</label>
                </div>
              </div> 
              <div class="form-group" [formGroup]="formManualModal">
                <label for="precipitation">What is the runway surface type?</label>
                 <div class="row d-flex justify-content-left">
                  <input type="radio" formControlName="concreteRunway" id="ConcreteRadio" class="radio" value="1"/>
                  <label for="concreteRunway" class="radio-label">Concrete</label>
                  <input type="radio" formControlName="grassRunway" id="GrassRadio" class="radio"/>
                  <label for="grassRunway" class="radio-label">Grass</label>
                </div>
              </div> 
              <div class="form-group" [formGroup]="formManualModal">
                <label for="pressureAltitude">Pressure Altitude</label>
                <div class="row">
                  <input type="number" formControlName="pressureAltitude" class="form-control manual-form-control" placeholder="Enter pressure altitude" [ngClass]="{ 'is-invalid': submittedManualModal && fManual['pressureAltitude'].errors }" />
                  <h2 class="ml-1 mt-1 font-weight-normal">ft</h2>
                </div>
                <div *ngIf="submittedManualModal && fManual['pressureAltitude'].errors" class="invalid-feedback">
                  <div *ngIf="fManual['pressureAltitude'].errors['required']">Pressure Altitude is required.</div>
                </div>
              </div> 
              <div class="form-group" [formGroup]="formManualModal">
                <label for="headwind">Headwind</label>
                <div class="row">
                  <input type="number" formControlName="headwind" class="form-control manual-form-control" placeholder="Enter headwind" [ngClass]="{ 'is-invalid': submittedManualModal && fManual['headwind'].errors }" />
                  <h2 class="ml-1 mt-1 font-weight-normal">kts</h2>
                </div>
                <div *ngIf="submittedManualModal && fManual['headwind'].errors" class="invalid-feedback">
                  <div *ngIf="fManual['headwind'].errors['required']">Headwind is required.</div>
                </div>
              </div> 
            </form>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-outline-dark active" (click)="closeManualModal(false)">Close</button>
          <button type="button" class="btn btn-outline-dark active" (click)="closeManualModal(true)">Save</button>
        </div>
      </div> 
    </div>
  </div>

  <!-- Performance Modal -->
  <div class="modal" tabindex="-1" role="dialog" id="performance-modal" [ngStyle]="{'display':displayPerformance}">
    <div class="modal-dialog" role="document" id="performance-modal-dialog">
      <div class="modal-content d-flex justify-content-center">
        <div class="modal-header d-flex justify-content-center">
          <h1 class="modal-title my-auto">Performance Parameters</h1>
        </div>
        <div class="modal-body d-flex justify-content-center">
          <div class="row d-flex justify-content-center">
              <div class="blank-card col-lg-6">
                <ul class="list-group list-group-flush align-center">
                  <li class="list-group-item p-2">
                    <button class="btn btn-dark performance-selection" id="DisplayTakeoffButton">Takeoff</button>
                    <button class="btn btn-outline-dark performance-selection" id="DisplayLandingButton">Landing</button>
                    <button class="btn btn-outline-dark performance-selection" id="DisplayStallSpeedButton">Stall Speeds</button>
                  </li>
                </ul>
               
                <!-- Takeoff output list -->
                <ul class="list-group list-group-flush align-center" [ngStyle]="{'display':displayTakeoff}">
                  <li class="list-group-item p-0">
                    <div class="row d-flex justify-content-left m-0">
                      <div class="shadow-lg text-center bg-dark p-2 m-0 output-label-block">
                        <h2 class="output-label">Takeoff Speed</h2>
                      </div>
                      <div class="shadow-lg text-center output-block bg-white p-2">
                        <h3 id="takeoff-speed-output">{{performanceOutput.takeoffSpeed.toFixed(0)}}</h3>
                      </div>
                      <div class="shadow-lg bg-dark speed-unit-block text-center">
                        <h4 class="output-label" id="takeoff-speed-unit">kts</h4>
                      </div>
                    </div> 
                  </li>
                  <li class="list-group-item p-0">
                    <div class="row d-flex justify-content-left m-0">
                      <div class="shadow-lg text-center bg-dark p-2 m-0 output-label-block">
                        <h2 class="output-label">Takeoff Distance</h2>
                      </div>
                      <div class="shadow-lg text-center output-block bg-white p-2">
                        <h3 id="takeoff-distance-output">{{performanceOutput.takeoffDistance.toFixed(0)}}</h3>
                      </div>
                      <div class="shadow-lg bg-dark p-2 m-0 unit-block text-center">
                        <h4 class="output-label" id="takeoff-distance-unit">ft</h4>
                      </div>
                    </div> 
                  </li>
                  <li class="list-group-item p-0">
                    <div class="row d-flex justify-content-left m-0">
                      <div class="shadow-lg text-center bg-dark p-2 m-0 output-label-block">
                        <h2 class="output-label">Ground-Run Distance</h2>
                      </div>
                      <div class="shadow-lg text-center output-block bg-white p-2">
                        <h3 id="ground-distance-output">{{performanceOutput.groundRunDistance.toFixed(0)}}</h3>
                      </div>
                      <div class="shadow-lg bg-dark p-2 m-0 unit-block text-center">
                        <h4 class="output-label" id="ground-run-unit">ft</h4>
                      </div>
                    </div> 
                  </li>
                  <li class="list-group-item p-0">
                    <div class="row d-flex justify-content-left m-0">
                      <div class="shadow-lg text-center bg-dark p-2 m-0 output-label-block">
                        <h2 class="output-label">Accel-Stop Distance</h2>
                      </div>
                      <div class="shadow-lg text-center output-block bg-white p-2">
                        <h3 id="accel-distance-output">{{performanceOutput.accelStopDistance.toFixed(0)}}</h3>
                      </div>
                      <div class="shadow-lg bg-dark p-2 m-0 unit-block text-center">
                        <h4 class="output-label" id="accel-stop-unit">ft</h4>
                      </div>
                    </div> 
                  <li class="list-group-item p-0">
                    <div class="row d-flex justify-content-left m-0">
                      <div class="shadow-lg text-center bg-dark p-2 m-0 output-label-block">
                        <h2 class="output-label">Speed Over Obstacle</h2>
                      </div>
                      <div class="shadow-lg text-center output-block bg-white p-2">
                        <h3 id="speed-over-obstacle-output">{{performanceOutput.speedOverObstacle.toFixed(0)}}</h3>
                      </div>
                      <div class="shadow-lg bg-dark m-0 speed-unit-block text-center">
                        <h4 class="output-label" id="speed-over-unit">kts</h4>
                      </div>
                    </div> 
                  </li>
                </ul>
              
                <!-- Landing Output List -->
                <ul class="list-group list-group-flush align-center" [ngStyle]="{'display':displayLanding}">
                  <li class="list-group-item p-0">
                    <div class="row d-flex justify-content-left m-0">
                      <div class="shadow-lg text-center bg-dark p-2 m-0 output-label-block">
                        <h2 class="output-label">Landing Distance</h2>
                      </div>
                      <div class="shadow-lg text-center output-block bg-white p-2">
                        <h3 id="landing-distance-output">{{performanceOutput.landingDistance.toFixed(0)}}</h3>
                      </div>
                      <div class="shadow-lg bg-dark p-2 m-0 unit-block text-center">
                        <h4 class="output-label" id="landing-distance-unit">ft</h4>
                      </div>
                    </div> 
                  </li>
                  <li class="list-group-item p-0">
                    <div class="row d-flex justify-content-left m-0">
                      <div class="shadow-lg text-center bg-dark p-2 m-0 output-label-block">
                        <h2 class="output-label">Approach Speed</h2>
                      </div>
                      <div class="shadow-lg text-center output-block bg-white p-2">
                        <h3 id="approach-speed-output">{{performanceOutput.approachSpeed.toFixed(0)}}</h3>
                      </div>
                      <div class="shadow-lg bg-dark m-0 speed-unit-block text-center">
                        <h4 class="output-label" id="approach-speed-unit">kts</h4>
                      </div>
                    </div> 
                  </li>
                  <li class="list-group-item p-0">
                    <div class="row d-flex justify-content-left m-0">
                      <div class="shadow-lg text-center bg-dark p-2 m-0 output-label-block">
                        <h2 class="output-label">Touch-Down Speed</h2>
                      </div>
                      <div class="shadow-lg text-center output-block bg-white p-2">
                        <h3 id="touch-down-speed-output">{{performanceOutput.touchDownSpeed.toFixed(0)}}</h3>
                      </div>
                      <div class="shadow-lg bg-dark m-0 speed-unit-block text-center">
                        <h4 class="output-label" id="touch-down-unit">kts</h4>
                      </div>
                    </div> 
                  </li>
                </ul>
              
                <!-- Stall speed output list -->
                <ul class="list-group list-group-flush align-center" [ngStyle]="{'display':displaySpeeds}">
                  <li class="list-group-item p-0">
                    <div class="row d-flex text-center justify-content-left m-0">
                      <div class="shadow-lg bg-dark p-2 m-0 output-label-block">
                        <h3 class="output-label">VS1, Flaps 25&deg;, Gear Extended</h3>
                      </div>
                      <div class="shadow-lg text-center output-block bg-white p-4">
                        <h3 id="vs1-output">{{performanceOutput.stallSpeedVS1.toFixed(0)}}</h3>
                      </div>
                      <div class="shadow-lg bg-dark m-0 unit-block-big text-center row d-flex justify-content-center">
                        <h4 class="output-label" id="vs1-unit">kts</h4>
                      </div>
                    </div> 
                  </li>
                  <li class="list-group-item p-0">
                    <div class="row d-flex justify-content-left m-0">
                      <div class="shadow-lg bg-dark text-center p-2 m-0 output-label-block">
                        <h3 class="output-label">VS0, Gear Down, Ground Proximity</h3>
                      </div>
                      <div class="shadow-lg text-center output-block bg-white p-4">
                        <h3 id="vs0-gu-output">{{performanceOutput.stallSpeedVS0GU.toFixed(0)}}</h3>
                      </div>
                      <div class="shadow-lg bg-dark m-0 unit-block-big text-center row d-flex justify-content-center">
                        <h4 class="output-label" id="vs0-gu-unit">kts</h4>
                      </div>
                    </div> 
                  </li>
                  <li class="list-group-item p-0">
                    <div class="row d-flex justify-content-left m-0">
                      <div class="shadow-lg text-center bg-dark p-2 m-0 output-label-block">
                        <h3 class="output-label">VS0, Gear Down, No Ground Proximity</h3>
                      </div>
                      <div class="shadow-lg text-center output-block bg-white p-4">
                        <h3 id="vs0-gd-output">{{performanceOutput.stallSpeedVS0GD.toFixed(0)}}</h3>
                      </div>
                      <div class="shadow-lg bg-dark m-0 unit-block-big text-center row d-flex justify-content-center">
                        <h4 class="output-label" id="vs0-gd-unit">kts</h4>
                      </div>
                    </div> 
                  </li>
                </ul>

                <div class="row d-flex justify-content-left">
                  <div class="runway-parent">
                    <img class="runway-picture" src="assets/img/runway.jpg" />
                    <img [ngStyle]="{'display':displayPlanes}" src="assets/img/red-line.jpg" id="takeoff-red-line" />
                    <img [ngStyle]="{'display':displayPlanes}" src="assets/img/airplane-icon.png" id="takeoff-plane"/>
                  </div>
                  <div class="runway-parent">
                    <img class="runway-picture" src="assets/img/runway.jpg" />
                    <img [ngStyle]="{'display':displayPlanes}" src="assets/img/red-line.jpg" id="landing-red-line" />
                    <img [ngStyle]="{'display':displayPlanes}" src="assets/img/airplane-icon.png" id="landing-plane"/>
                  </div>
                </div>
            </div>  
            <div class="blank-card col-lg-5 mr-5">
              <table class="text-center">
                <tr>
                  <th colspan="6">L39 Loading</th>
                </tr>
                <tr><th></th><th>Gallons</th><th>Pounds</th><th>ARM</th><th>Moment</th><th>%MAC</th>
                <tr>
                  <th>Basic Empty Aircraft</th>
                  <td></td>
                  <td><span *ngIf="this.constants">{{ constants.basicEmptyAircraftWeight }}</span></td>
                  <td><span *ngIf="this.constants">{{ constants.basicEmptyAircraft.toFixed(0) }}</span></td>
                  <td><span *ngIf="this.constants">{{ (constants.basicEmptyAircraftWeight*constants.basicEmptyAircraft).toFixed(0) }}</span></td>
                  <td><span class="text-primary" *ngIf="this.emptyAircraftMAC">{{ emptyAircraftMAC.toFixed(0) }}%</span></td>
                </tr>
                <tr>
                  <td>Pilot (1)</td>
                  <td></td>
                  <td><span *ngIf="this.pilot1.mass > 0">{{ pilot1.mass }}</span></td>
                  <td><span *ngIf="this.constants && this.pilot1.mass > 0">{{ constants.pilot1.toFixed(0) }}</span></td>
                  <td><span *ngIf="this.pilot1.mass > 0 && this.constants">{{ (constants.pilot1*pilot1.mass).toFixed(0) }}</span></td>
                  <td></td>
                </tr>
                <tr>
                  <td>Pilot (2)</td>
                  <td></td>
                  <td><span *ngIf="this.pilot2.mass > 0">{{ pilot2.mass }}</span></td>
                  <td><span *ngIf="this.constants && this.pilot2.mass > 0">{{ constants.pilot2.toFixed(0) }}</span></td>
                  <td><span *ngIf="this.pilot2.mass > 0 && this.constants">{{ (constants.pilot2*pilot2.mass).toFixed(0) }}</span></td>
                  <td></td>
                </tr>
                <tr>
                  <td>Parachute 2</td>
                  <td></td>
                  <td><span *ngIf="!this.parachute2">{{ -constants.parachuteWeight }}</span></td>
                  <td><span *ngIf="this.constants && !this.parachute2">{{ constants.pilot2 }}</span></td>
                  <td><span *ngIf="!this.parachute2 && this.constants">{{ (constants.pilot2*constants.parachuteWeight).toFixed(0) }}</span></td>
                  <td></td>
                </tr>
                <tr>
                  <td>Baggage (1)</td>
                  <td></td>
                  <td><span *ngIf="this.baggage1">{{ baggage1 }}</span></td>
                  <td><span *ngIf="this.baggage1 && this.constants">{{ constants.baggage1 }}</span></td>
                  <td><span *ngIf="this.baggage1 && this.constants">{{ constants.baggage1*baggage1 }}</span></td>
                  <td></td>
                </tr>
                <tr>
                  <td>Baggage (2)</td>
                  <td></td>
                  <td><span *ngIf="this.baggage2">{{ baggage2 }}</span></td>
                  <td><span *ngIf="this.baggage2 && this.constants">{{ constants.baggage2.toFixed(0) }}</span></td>
                  <td><span *ngIf="this.baggage2 && this.constants">{{ (constants.baggage2*baggage2).toFixed(0) }}</span></td>
                  <td></td>
                </tr>
                <tr>
                  <td class ="font-weight-bold">Minimum Fuselage Fuel</td>
                  <td><span>60</span></td>
                  <td><span>409</span></td>
                  <td><span *ngIf="this.constants">{{ this.constants.tanks.toFixed(0) }}</span></td>
                  <td><span *ngIf="this.zeroMomentSum">{{ (this.constants.tanks*409).toFixed(0) }}</span></td>
                  <td></td>
                </tr>
                <tr>
                  <td>&nbsp;</td>
                  <td>&nbsp;</td>
                  <td><span *ngIf="this.zeroWeightSum">{{zeroWeightSum.toFixed(0) }}</span></td>
                  <td><span *ngIf="this.zeroMomentSum && this.zeroWeightSum">{{ (zeroMomentSum/(zeroWeightSum+60)).toFixed(0) }}</span></td>
                  <td><span *ngIf="this.zeroMomentSum">{{ zeroMomentSum.toFixed(0) }}</span></td>
                  <td><span class="text-primary" *ngIf="this.zeroMomentSum && this.zeroWeightSum">{{ ((((zeroMomentSum/this.zeroWeightSum)-this.constants.macrefDatum)*100)/this.constants.macl39).toFixed(1) }}%</span></td>
                </tr>
                <tr>
                  <td>&nbsp;</td>
                  <td>&nbsp;</td>
                  <td>&nbsp;</td>
                  <td>&nbsp;</td>
                  <td>&nbsp;</td>
                  <td>&nbsp;</td>
                </tr>
                <tr>
                  <td class ="font-weight-bold">Actual Fuselage Fuel</td>
                  <td><span *ngIf="this.currentProfile">{{ currentProfile.internalTank }}</span></td>
                  <td><span *ngIf="this.currentProfile">{{ (currentProfile.internalTank*6.815).toFixed(0) }}</span></td>
                  <td><span *ngIf="this.currentProfile && this.constants">{{ constants.tanks.toFixed(0) }}</span></td>
                  <td><span *ngIf="this.currentProfile && this.constants">{{ (constants.tanks*currentProfile.internalTank*6.815).toFixed(0) }}</span></td>
                  <td></td>
                </tr>
                <tr>
                  <td class ="font-weight-bold">Tip Tanks</td>
                  <td><span *ngIf="this.currentProfile">{{ currentProfile.tipTank }}</span></td>
                  <td><span *ngIf="this.currentProfile">{{ (currentProfile.tipTank*6.815).toFixed(0) }}</span></td>
                  <td><span *ngIf="this.currentProfile && this.constants">{{ constants.tanks.toFixed(0) }}</span></td>
                  <td><span *ngIf="this.currentProfile && this.constants">{{ (constants.tanks*currentProfile.tipTank*6.815).toFixed(0) }}</span></td>
                  <td></td>
                </tr>
                <tr>
                  <td class ="font-weight-bold">Underwing Tanks</td>
                  <td><span *ngIf="this.currentProfile">{{ currentProfile.underwingTank }}</span></td>
                  <td><span *ngIf="this.currentProfile">{{ (currentProfile.underwingTank*6.815).toFixed(0) }}</span></td>
                  <td><span *ngIf="this.currentProfile && this.constants">{{ constants.tanks.toFixed(0) }}</span></td>
                  <td><span *ngIf="this.currentProfile && this.constants">{{ (constants.tanks*currentProfile.underwingTank*6.815).toFixed(0) }}</span></td>
                  <td></td>
                </tr>
                <tr>
                  <td>Outboard</td>
                  <td></td>
                  <td><span *ngIf="this.outboard">{{ outboard }}</span></td>
                  <td><span *ngIf="this.outboard && this.currentProfile && this.constants">{{ constants.tanks.toFixed(0) }}</span></td>
                  <td><span *ngIf="this.outboard && this.currentProfile && this.constants">{{ (constants.tanks*currentProfile.outboard).toFixed(0) }}</span></td>
                  <td></td>
                </tr>
                <tr>
                  <td>Centerline Store</td>
                  <td></td>
                  <td><span *ngIf="this.currentProfile && this.currentProfile.agilePod && this.constants">{{ constants.emptyAgilePodWeight + currentProfile.agileWeight + constants.agileRailWeight }}</span></td>
                  <td><span *ngIf="this.currentProfile && this.currentProfile.agilePod && this.constants">{{ agilePodARM.toFixed(0) }}</span></td>
                  <td><span *ngIf="this.currentProfile && this.currentProfile.agilePod && this.constants">{{ ((constants.emptyAgilePodWeight + currentProfile.agileWeight + constants.agileRailWeight)*agilePodARM).toFixed(0) }}</span></td>
                  <td></td>
                </tr>
                <tr>
                  <td class ="font-weight-bold">Total</td>
                  <td></td>
                  <td><span *ngIf="this.weightSum">{{ weightSum.toFixed(0) }}</span></td>
                  <td><span *ngIf="this.momentSum && this.weightSum">{{ (momentSum/weightSum).toFixed(1) }}</span></td>
                  <td><span *ngIf="this.momentSum">{{ momentSum.toFixed(0) }}</span></td>
                  <td><span class="text-primary" *ngIf="this.momentSum && this.weightSum">{{ ((((momentSum/this.weightSum)-this.constants.macrefDatum)*100)/this.constants.macl39).toFixed(1) }}%</span></td>
                </tr>
              </table>

              <div class="blank-card justify-content-center d-flex ml-5">
                <div *ngIf="solverOutput" class="text-danger">Number of gallons needed to be lost before landing: {{ solverOutput.galLost }}</div>
              </div>
            </div>
          </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-outline-dark active" (click)="closePerformanceModal()">Close</button>
            <button type="button" class="btn btn-outline-dark active" (click)="printCard()">Print</button>
          </div>
        </div>
      </div>    
    </div>
</layout-dashboard>

<div id="PrintCard" class="d-none d-print-block">
  <!-- Takeoff output list -->
  <div class="row d-flex justify-content-center">
    <div class="col-md-6">
      <ul>
        <li class="list-group-item p-0">
          <div class="shadow-lg text-center p-2 m-0 w-100 bg-secondary">
            <h1 class="title-text my-auto">Takeoff</h1>
          </div>
        </li>
        <li class="list-group-item p-0">
          <div class="row d-flex justify-content-left m-0">
            <div class="shadow-lg text-center bg-dark p-2 m-0 output-label-block">
              <h2 class="output-label">Takeoff Speed</h2>
            </div>
            <div class="shadow-lg text-center output-block bg-white p-2">
              <h3 id="takeoff-speed-output">{{performanceOutput.takeoffSpeed.toFixed(0)}}</h3>
            </div>
            <div class="shadow-lg bg-dark speed-unit-block text-center">
              <h4 class="output-label" id="takeoff-speed-unit">kts</h4>
            </div>
          </div> 
        </li>
        <li class="list-group-item p-0">
          <div class="row d-flex justify-content-left m-0">
            <div class="shadow-lg text-center bg-dark p-2 m-0 output-label-block">
              <h2 class="output-label">Takeoff Distance</h2>
            </div>
            <div class="shadow-lg text-center output-block bg-white p-2">
              <h3 id="takeoff-distance-output">{{performanceOutput.takeoffDistance.toFixed(0)}}</h3>
            </div>
            <div class="shadow-lg bg-dark p-2 m-0 unit-block text-center">
              <h4 class="output-label" id="takeoff-distance-unit">ft</h4>
            </div>
          </div> 
        </li>
        <li class="list-group-item p-0">
          <div class="row d-flex justify-content-left m-0">
            <div class="shadow-lg text-center bg-dark p-2 m-0 output-label-block">
              <h2 class="output-label">Ground-Run Distance</h2>
            </div>
            <div class="shadow-lg text-center output-block bg-white p-2">
              <h3 id="ground-distance-output">{{performanceOutput.groundRunDistance.toFixed(0)}}</h3>
            </div>
            <div class="shadow-lg bg-dark p-2 m-0 unit-block text-center">
              <h4 class="output-label" id="ground-run-unit">ft</h4>
            </div>
          </div> 
        </li>
        <li class="list-group-item p-0">
          <div class="row d-flex justify-content-left m-0">
            <div class="shadow-lg text-center bg-dark p-2 m-0 output-label-block">
              <h2 class="output-label">Accel-Stop Distance</h2>
            </div>
            <div class="shadow-lg text-center output-block bg-white p-2">
              <h3 id="accel-distance-output">{{performanceOutput.accelStopDistance.toFixed(0)}}</h3>
            </div>
            <div class="shadow-lg bg-dark p-2 m-0 unit-block text-center">
              <h4 class="output-label" id="accel-stop-unit">ft</h4>
            </div>
          </div> 
        <li class="list-group-item p-0">
          <div class="row d-flex justify-content-left m-0">
            <div class="shadow-lg text-center bg-dark p-2 m-0 output-label-block">
              <h2 class="output-label">Speed Over Obstacle</h2>
            </div>
            <div class="shadow-lg text-center output-block bg-white p-2">
              <h3 id="speed-over-obstacle-output">{{performanceOutput.speedOverObstacle.toFixed(0)}}</h3>
            </div>
            <div class="shadow-lg bg-dark m-0 speed-unit-block text-center">
              <h4 class="output-label" id="speed-over-unit">kts</h4>
            </div>
          </div> 
        </li>
      </ul>
    </div>
    <div class="col-md-5">
      <!-- Stall speed -->
      <ul class="list-group list-group-flush align-center">
        <li class="list-group-item p-0">
          <div class="shadow-lg text-center p-2 m-0 w-100 bg-secondary">
            <h1 class="title-text my-auto">Stall Speeds</h1>
          </div>
        </li>
        <li class="list-group-item p-0">
          <div class="row d-flex justify-content-left m-0">
            <div class="shadow-lg bg-dark text-center p-2 m-0 output-label-block">
              <h3 class="output-label">VS0, Gear Down, Ground Proximity</h3>
            </div>
            <div class="shadow-lg text-center output-block bg-white p-4">
              <h3 id="vs0-gu-output">{{performanceOutput.stallSpeedVS0GU.toFixed(0)}}</h3>
            </div>
            <div class="shadow-lg bg-dark m-0 unit-block-big text-center row d-flex justify-content-center">
              <h4 class="output-label" id="vs0-gu-unit">kts</h4>
            </div>
          </div> 
        </li>
        <li class="list-group-item p-0">
          <div class="row d-flex justify-content-left m-0">
            <div class="shadow-lg text-center bg-dark p-2 m-0 output-label-block">
              <h3 class="output-label">VS0, Gear Down, No Ground Proximity</h3>
            </div>
            <div class="shadow-lg text-center output-block bg-white p-4">
              <h3 id="vs0-gd-output">{{performanceOutput.stallSpeedVS0GD.toFixed(0)}}</h3>
            </div>
            <div class="shadow-lg bg-dark m-0 unit-block-big text-center row d-flex justify-content-center">
              <h4 class="output-label" id="vs0-gd-unit">kts</h4>
            </div>
          </div> 
        </li>
      </ul>
    </div>
  </div>

  <div class="row d-flex justify-content-center">
    <div class="col-md-12">
      <!-- landing -->
      <ul class="list-group list-group-flush align-center">
        <li class="list-group-item p-0">
          <div class="shadow-lg text-center p-2 m-0 w-100 bg-secondary">
            <h1 class="title-text my-auto">Landing</h1>
          </div>
        </li>
        <li class="list-group-item p-0 border-bottom border-dark">
          <div class="row d-flex justify-content-left m-0">
            <div class="shadow-lg text-center bg-dark p-2 m-0 output-label-block-land">
              <h2 class="output-label">&nbsp;</h2>
            </div>
            <div class="shadow-lg text-center output-block-land bg-white p-2">
              <h3 class="font-weight-bold">60 gal</h3>
            </div>
            <div class="shadow-lg text-center output-block-land bg-white p-2">
              <h3 class="font-weight-bold">150 gal</h3>
            </div>
            <div class="shadow-lg text-center output-block-land bg-white p-2">
              <h3 class="font-weight-bold">200 gal</h3>
            </div>
            <div class="shadow-lg text-center output-block-land bg-white p-2">
              <h3 class="font-weight-bold">250 gal</h3>
            </div>
            <div class="shadow-lg text-center output-block-land bg-white p-2">
              <h3 class="font-weight-bold">300 gal</h3>
            </div>
            <div class="shadow-lg bg-dark p-2 m-0 unit-block-land text-center">
              <h4 class="output-label" id="landing-distance-unit">&nbsp;</h4>
            </div>
          </div> 
        </li>
        <li class="list-group-item p-0">
          <div class="row d-flex justify-content-left m-0">
            <div class="shadow-lg text-center bg-dark p-2 m-0 output-label-block-land">
              <h2 class="output-label">Landing Distance</h2>
            </div>
            <div class="shadow-lg text-center output-block-land bg-white p-2">
              <h3 id="landing-distance-output" *ngIf="calculatorOutputs">{{ calculatorOutputs[0].landingDistance.toFixed(0) }}</h3>
            </div>
            <div class="shadow-lg text-center output-block-land bg-white p-2">
              <h3 id="landing-distance-output" *ngIf="calculatorOutputs">{{ calculatorOutputs[1].landingDistance.toFixed(0) }}</h3>
            </div>
            <div class="shadow-lg text-center output-block-land bg-white p-2">
              <h3 id="landing-distance-output" *ngIf="calculatorOutputs">{{ calculatorOutputs[2].landingDistance.toFixed(0) }}</h3>
            </div>
            <div class="shadow-lg text-center output-block-land bg-white p-2">
              <h3 id="landing-distance-output" *ngIf="calculatorOutputs">{{ calculatorOutputs[3].landingDistance.toFixed(0) }}</h3>
            </div>
            <div class="shadow-lg text-center output-block-land bg-white p-2">
              <h3 id="landing-distance-output" *ngIf="calculatorOutputs">{{ calculatorOutputs[4].landingDistance.toFixed(0) }}</h3>
            </div>
            <div class="shadow-lg bg-dark p-2 m-0 unit-block-land text-center">
              <h4 class="output-label" id="landing-distance-unit">ft</h4>
            </div>
          </div> 
        </li>
        <li class="list-group-item p-0">
          <div class="row d-flex justify-content-left m-0">
            <div class="shadow-lg text-center bg-dark p-2 m-0 output-label-block-land">
              <h2 class="output-label">Approach Speed</h2>
            </div>
            <div class="shadow-lg text-center output-block-land bg-white p-2">
              <h3 id="landing-distance-output" *ngIf="calculatorOutputs">{{ calculatorOutputs[0].approachSpeed.toFixed(0) }}</h3>
            </div>
            <div class="shadow-lg text-center output-block-land bg-white p-2">
              <h3 id="landing-distance-output" *ngIf="calculatorOutputs">{{ calculatorOutputs[1].approachSpeed.toFixed(0) }}</h3>
            </div>
            <div class="shadow-lg text-center output-block-land bg-white p-2">
              <h3 id="landing-distance-output" *ngIf="calculatorOutputs">{{ calculatorOutputs[2].approachSpeed.toFixed(0) }}</h3>
            </div>
            <div class="shadow-lg text-center output-block-land bg-white p-2">
              <h3 id="landing-distance-output" *ngIf="calculatorOutputs">{{ calculatorOutputs[3].approachSpeed.toFixed(0) }}</h3>
            </div>
            <div class="shadow-lg text-center output-block-land bg-white p-2">
              <h3 id="landing-distance-output" *ngIf="calculatorOutputs">{{ calculatorOutputs[4].approachSpeed.toFixed(0) }}</h3>
            </div>
            <div class="shadow-lg bg-dark m-0 unit-block-land text-center">
              <h4 class="output-label" id="approach-speed-unit">kts</h4>
            </div>
          </div> 
        </li>
        <li class="list-group-item p-0">
          <div class="row d-flex justify-content-left m-0">
            <div class="shadow-lg text-center bg-dark p-2 m-0 output-label-block-land">
              <h2 class="output-label">Touch-Down Speed</h2>
            </div>
            <div class="shadow-lg text-center output-block-land bg-white p-2">
              <h3 id="landing-distance-output" *ngIf="calculatorOutputs">{{ calculatorOutputs[0].touchDownSpeed.toFixed(0) }}</h3>
            </div>
            <div class="shadow-lg text-center output-block-land bg-white p-2">
              <h3 id="landing-distance-output" *ngIf="calculatorOutputs">{{ calculatorOutputs[1].touchDownSpeed.toFixed(0) }}</h3>
            </div>
            <div class="shadow-lg text-center output-block-land bg-white p-2">
              <h3 id="landing-distance-output" *ngIf="calculatorOutputs">{{ calculatorOutputs[2].touchDownSpeed.toFixed(0) }}</h3>
            </div>
            <div class="shadow-lg text-center output-block-land bg-white p-2">
              <h3 id="landing-distance-output" *ngIf="calculatorOutputs">{{ calculatorOutputs[3].touchDownSpeed.toFixed(0) }}</h3>
            </div>
            <div class="shadow-lg text-center output-block-land bg-white p-2">
              <h3 id="landing-distance-output" *ngIf="calculatorOutputs">{{ calculatorOutputs[4].touchDownSpeed.toFixed(0) }}</h3>
            </div>
            <div class="shadow-lg bg-dark m-0 unit-block-land text-center">
              <h4 class="output-label" id="touch-down-unit">kts</h4>
            </div>
          </div> 
        </li>
      </ul>
    </div>
  </div>
</div>

